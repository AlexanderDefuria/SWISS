{% load i18n static common_tags %}

<div>
	<label>Starting Position</label>
	<div style="align-self: flex-end">
		<canvas width="200" height="100" style="background: url({{ MEDIA_URL }}{% static 'BlueTarmac.png' %})" alt="Blue Tarmac. If Broken call Nick."></canvas>
		<div style="text-align: right">
			<input type="number" id="{{ widget.subwidgets.0.name }}" name="{{ widget.subwidgets.0.name }}" placeholder="x" readonly>
			<input type="number" id="{{ widget.subwidgets.1.name }}" name="{{ widget.subwidgets.1.name }}" placeholder="y" readonly>
		</div>
	</div>
	<script type="text/javascript">
		let fieldx = document.getElementById("{{ widget.subwidgets.0.name }}");
		let fieldy = document.getElementById("{{ widget.subwidgets.1.name }}");

		function getMousePosition(canvas, event) {
			let rect = canvas.getBoundingClientRect();
			let x = event.clientX - rect.left;
			let y = event.clientY - rect.top;
			fieldx.value = (x / rect.width);
			fieldy.value = (y / rect.height);
		}
		let canvasElem = document.querySelector("canvas");
		canvasElem.addEventListener("mousedown", function(e)
		{
			getMousePosition(canvasElem, e);
		});
	</script>
</div>